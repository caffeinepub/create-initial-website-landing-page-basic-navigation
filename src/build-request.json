{
  "kind": "build_request",
  "title": "Fix deployment failure and enable end-to-end dfx deployment (backend + frontend)",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Add the missing Internet Computer project configuration so the app can be deployed with DFX: create a root-level `dfx.json` that defines a Motoko `backend` canister (source `backend/main.mo`) and a static asset `frontend` canister that serves the built Vite output from `frontend/dist`.",
      "target": "both",
      "source": {
        "messageIds": [
          "recent-messages-1"
        ],
        "quotes": [
          "complete the deployment"
        ]
      },
      "acceptanceCriteria": [
        "A new `dfx.json` exists at the repo root.",
        "`dfx start --clean` followed by `dfx deploy` completes successfully on local replica.",
        "`dfx canister call backend getSiteInfo` returns the expected fields (name, tagline, heroCta).",
        "After local deploy, visiting the local frontend canister URL loads the React app and the homepage displays the backend-provided site info (e.g., \"Archiv Agency\" and tagline)."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Add a complete `frontend/package.json` with standard Vite + React scripts and dependencies required by the existing codebase (React, Vite, Tailwind, TanStack Router, TanStack React Query, next-themes, etc.) so `npm install` and `npm run build` succeed in `frontend/`.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-messages-1"
        ],
        "quotes": [
          "complete the deployment"
        ]
      },
      "acceptanceCriteria": [
        "`frontend/package.json` exists.",
        "From `frontend/`, `npm install` completes without errors.",
        "From `frontend/`, `npm run build` produces a production build in `frontend/dist` (matching `vite.config.ts` outDir)."
      ]
    },
    {
      "id": "REQ-3",
      "text": "Ensure the frontend canister deployment uses the Vite build output and that DFX build/install steps work for the frontend canister (including any needed build steps to run `npm run build` before packaging assets).",
      "target": "both",
      "source": {
        "messageIds": [
          "recent-messages-1"
        ],
        "quotes": [
          "complete the deployment"
        ]
      },
      "acceptanceCriteria": [
        "`dfx deploy frontend` (local) results in the frontend canister serving the built assets (HTML/CSS/JS load successfully).",
        "No missing-asset errors occur in the browser console when loading the deployed frontend locally."
      ]
    },
    {
      "id": "REQ-4",
      "text": "Update `frontend/DEPLOYMENT.md` to be complete (it currently ends mid-section) and provide an end-to-end, copy/paste deployment flow that matches the repoâ€™s actual files (including the new `dfx.json` and `frontend/package.json`) for both local testing and IC mainnet deployment.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-messages-1"
        ],
        "quotes": [
          "complete the deployment"
        ]
      },
      "acceptanceCriteria": [
        "`frontend/DEPLOYMENT.md` includes complete steps for: local replica deploy + verification, and IC mainnet deploy + verification.",
        "All commands in the doc reference existing files/paths and match the final build/deploy process (e.g., building Vite to `frontend/dist` and deploying the asset canister).",
        "User-facing documentation text is in English."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor in `backend/main.mo` (no additional backend services).",
    "Do not edit files under `frontend/src/components/ui` (compose them only).",
    "Do not modify immutable hook/entrypoint paths listed in SYSTEM_CONTEXT; add new files or adjust non-immutable configuration instead."
  ],
  "nonGoals": [
    "Adding new product features or pages unrelated to deployment.",
    "Integrating third-party hosting providers or external databases."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}